

<div class="headerImg">
  <h1 id="eventTitle" class="text-center"><%= @event.name %></h1>
  <div><%= cl_image_tag(@event.image)%></div>
</div>
<!-- <div class="container-fluid"> -->
<div class="container-fluid crawls-well show-margin">
<div class="row">
<div class="col-xs-8">
<h3 id="eventDate" class="text-left"><%= @event.date %></h3>
</div> <!-- end div class="col-xs-8" -->
<div class="col-xs-4">
<h3 id="eventTime"><%= @event.time %></h3>
</div><!-- end div class="col-xs-4" -->
</div><!-- end div class="row" -->
<div class='divLast'>
</div>
</div>
<!-- </div> -->
<div class="container-fluid locations">
<h3>Crwlers</h3>
  <ul>
    <% @event.users.each do |user| %>

      <li><img src="<%= image_path('pub-crawl-icon3.png') %>" class="user-join"><%= user.username %> </li>
    <% end %>
  </ul>
  <button id="join-button"><a href="join/<%=@event.id%>">Join</a></button>
<h3>Locations:</h3>
<ul>
  <% @event.locations.each do |location| %>
    <% if !location.has_been_visited %>
      <li> <%= location.name %> / <%= location.address %> /Arrive: <%= location.arrivetime %> /Leave <%= location.departtime %> </li>
    <% else %>
      <li> <strike> <%= location.name %> / <%= location.address %> /Arrive: <%= location.arrivetime %> /Leave <%= location.departtime %> </strike> </li>
    <% end %>
  <% end %>
</ul>

<div id="map">MAP GOES HERE</div>

</div>



<% if @user == @event.users[@event.users.length - 1] %>
  <h3> Event Admin </h3>
  <p>Mark a location as visited</p>
    <% @event.locations.each do |location| %>
    
    <li> <%= location.name %> / <%= location.address %> <a href="left/<%= @event.id %>/<%=location.id%>"> Mark as left </a></li>

  <% end %>

<div class="container">
  <h4>Add a Stop To This Crawl</h4>
<div class= "form">
  <%= form_for :location, :html => {:class => "form-horizontal center"} do |f| %>
    <div class="form-group">
      <div class="col-md-8">
        <%= f.text_field :name, placeholder: "What's this place called?", class: "form-control input-lg" %>
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-8">
        <%= f.text_field :address, placeholder: "What's the address", class: "form-control input-lg" %>
      </div>
    </div>
    <div class="form-group">  
      <div class="col-md-8">
        <%= f.text_field :arrivetime, placeholder: "Enter a start time", class: "form-control input-lg" %>
      </div>
    </div> 
    <div class="form-group">
      <div class="col-md-8">
        <%= f.text_field :latitude, placeholder: "Lat (approx)", class: "form-control input-lg" %>
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-8">
        <%= f.text_field :longitude, placeholder: "Long (approx)", class: "form-control input-lg" %>
      </div>
    </div>
  
    <div class="button"><%= f.submit "Add Stop", class: "btn btn-primary btn-lg" %>
  <% end %>
  </div>

<% end %>

</div>
<!-- 
<div class="btn btn-danger" href="delete/<%=@event.id%>"><span class="glyphicon glyphicon-fire" aria-hidden="true"></span> NUKE THIS CRAWL <span class="glyphicon glyphicon-fire" aria-hidden="true"></span></div>
 -->

<script src="<%=@map_url%>" async defer></script>

<script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 47.6205, lng: -122.3493},
          zoom: 8
        });
      }
</script>
